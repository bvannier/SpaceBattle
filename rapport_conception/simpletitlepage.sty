\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{simpletitlepage}[2010/01/06]

\newif\if@french     		\@frenchfalse
\newif\if@english    		\@englishfalse
\newif\if@singleauthor    	\@singleauthorfalse
\newif\if@singlesupervisor  	\@singlesupervisorfalse

\DeclareOption{french}{\@frenchtrue}
\DeclareOption{francais}{\@frenchtrue}
\DeclareOption{english}{\@englishtrue}
\DeclareOption{anglais}{\@englishtrue}
\DeclareOption{singleauthor}{\@singleauthortrue}
\DeclareOption{singlesupervisor}{\@singlesupervisortrue}
\ProcessOptions

\RequirePackage{fancyhdr}

% Commande utilisÃ©e pour le bilinguisme du package
\newcommand{\@frenchenglish}[2]{%
	\if@french #1 \else #2 \fi
}

% Pour tracer des lignes horizontales
\newcommand{\HRule}{\rule{\linewidth}{0.5mm}}

% On veut des listes de personnes verticales
\renewcommand{\and}{\\}

% Ensemble des boolÃ©ens permettant de savoir si oui ou non les commandes ont Ã©tÃ© utilisÃ©es
\newif\if@simplesubtitletoggled		\@simplesubtitletoggledfalse
\newif\if@simpleschooltoggled		\@simpleschooltoggledfalse
\newif\if@simpleinfotoggled		\@simpleinfotoggledfalse
\newif\if@simplesupervisorstoggled	\@simplesupervisorstoggledfalse
\newif\if@authortoggled			\@authortoggledfalse

% Commandes utilisateur pour personnaliser la page
\newcommand{\simplesubtitle}[1]{\newcommand{\@simplesubtitle}{#1}\@simplesubtitletoggledtrue}
\newcommand{\simpleschool}[1]{\newcommand{\@simpleschool}{#1}\@simpleschooltoggledtrue}
\newcommand{\simpleinfo}[1]{\newcommand{\@simpleinfo}{#1}\@simpleinfotoggledtrue}
\newcommand{\simplesupervisors}[1]{\newcommand{\@simplesupervisors}{#1}\@simplesupervisorstoggledtrue}

% On redÃ©finit \author de maniÃ¨re Ã  contrÃ´ler s'il est utilisÃ© ou pas
\renewcommand{\author}[1]{\renewcommand{\@author}{#1}\@authortoggledtrue}

% Pour savoir si les auteurs sont en flushleft ou en center
\newenvironment{@authorsposition}{\if@simplesupervisorstoggled \begin{flushleft}\else \begin{center}\fi}
				{\if@simplesupervisorstoggled \end{flushleft}  \else \end{center}\fi}
				
% Pour savoir si les encadrants sont en flushright ou en center			
\newenvironment{@supervisorsposition}{\if@authortoggled \begin{flushright}\else \begin{center}\fi}
				{\if@authortoggled \end{flushright}  \else \end{center}\fi}
				
% RedÃ©finition de la grosse macro "maketitle" pour faire la page de titre qu'on veut.
\renewcommand\maketitle{%
	\begin{titlepage}

		\begin{figure}[h]
		\includegraphics[scale=0.4]{fig/logo_insarennes.eps}
		\end{figure}
		
		\vspace*{\stretch{.25}}

		\begin{center}
			% School
			\if@simpleschooltoggled
			\textsc{\LARGE \@simpleschool}\\[.5cm]
			\fi
			
			% Additionnal information
			\if@simpleinfotoggled
			\textsc{\Large \@simpleinfo}\\[1cm]
			\fi
			 
			% 1rst rule
			\HRule \\[0.4cm]
			
			% Title (there always must be a title)
			{ \huge \bfseries \@title}\\[0.4cm]
                  
			% Subtitle
			\if@simplesubtitletoggled
				{ \Large \@simplesubtitle}\\[0.4cm]
			\fi
                  
			%2nd rule
			\HRule \\[1.5cm]
			 
			% Author(s)
			\if@authortoggled
				\begin{minipage}{0.35\textwidth}
					\begin{@authorsposition}\large
						\emph{\@frenchenglish{Auteur\if@singleauthor\else s\fi}{Written by}}\\[0.1cm]
						\@author
					\end{@authorsposition}
				\end{minipage}
			\fi%
			% Supervisor(s)
			\if@simplesupervisorstoggled%
				\begin{minipage}{0.35\textwidth}
					\begin{@supervisorsposition} \large
						\emph{\@frenchenglish{Encadrant\if@singlesupervisor\else s\fi}{Supervised by}}\\[0.1cm]
						\@simplesupervisors
					\end{@supervisorsposition}
				\end{minipage}
			\fi
			 
			% Lot of space
			\vspace*{\stretch{.5}}

			% Bottom of the page
			{\large \@date}
			 
		\end{center}% 
	\end{titlepage}
}

\endinput
